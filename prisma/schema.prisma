generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Gender {
  MALE
  FEMALE
  ATTACK_HELICOPTER
}

enum BookingState {
  ACCEPTED
  BOOKED
  TERMINATED
  NEED_RESCHEDULE
  RESCHEDULED
  FINISHED
}

enum Role {
  FACULTY_COUNSELOR
  PSYHOPE_COUNSELOR
  FACULTY_ADMIN
  PSYHOPE_ADMIN
  CLIENT
}

enum Channel {
  INSTAGRAM
  LINE
}

enum CounselorType {
  PSYHOPE
  FACULTY
}

model User {
  id               String          @id
  namaRole         String          @map("nama_role")
  username         String          @unique
  fullname         String
  organizationCode String          @map("organization_code")
  token            String?
  account          Account?
  bookings         Booking[]
  isOnboarded      Boolean         @default(false)
  lineAcc          String?
  igAcc            String?
  CounselingLog    CounselingLog[]
}

model Account {
  id      Int      @id @default(autoincrement())
  role    Role     @default(CLIENT)
  user    User     @relation(fields: [userId], references: [id])
  userId  String   @unique
  gender  Gender
  faculty String
  major   String
  channel Channel?
}

model Booking {
  id                Int                 @id @default(autoincrement())
  user              User                @relation(fields: [userId], references: [id])
  userId            String
  time              DateTime
  counselorType     CounselorType       @map("counselor_type")
  reasonApply       String
  closestKnown      Boolean
  number_1          Int
  number_2          Int
  number_3          Int
  number_4          Int
  number_5          Int
  number_6          Int
  number_7          Int
  number_8          Int
  number_9          Int
  number_10         Int
  number_11         Int
  number_12         Int
  RescheduleRequest RescheduleRequest[]
  state             BookingState        @default(BOOKED)
}

model Article {
  id           Int      @id @default(autoincrement())
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  title        String
  content      String   @db.Text
  posterUrl    String
  thumbnailUrl String
}

model Event {
  id          Int      @id @default(autoincrement())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  title       String
  date        DateTime @db.Date
  location    String
  time        String
  description String   @db.Text
  posterUrl   String
}

model Infografic {
  id            Int      @id @default(autoincrement())
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  title         String
  description   String   @db.Text
  infograficUrl String
}

model RescheduleRequest {
  id        Int      @id @default(autoincrement())
  booking   Booking  @relation(fields: [bookingId], references: [id])
  bookingId Int      @map("booking_id")
  time      DateTime
}

model CounselingLog {
  id     Int      @id @default(autoincrement())
  client User     @relation(fields: [userId], references: [id])
  userId String
  time   DateTime
  detail String   @db.Text
}
